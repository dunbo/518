
<style>
table{
    border: 0px;
    width:500px;
}
.td_1{
    border: 0px solid #000;
    line-height: 30px;
    text-align: right;
    width:150px;
}
.td_2{
    border: 0px solid #000;
    line-height: 20px;
    text-align: left;
}
._tips{
    opacity:0.4;
}
</style>
 
<body>

<form method='post' action="__URL__/do_edit" enctype="multipart/form-data">
    <input type="hidden" id="id" name="id" value="{$info.id}">
    <input type="hidden" id="typeid" name="typeid" value="{$info.typeid}">
    <input type="hidden" id="version" name="version" value="{$info.version}">
    <if condition="$info.version == 3700">
    <table>
        <tr><td colspan="2"><h3>{$info.typename}</h3></td></tr>
        <if condition="$info.typeid eq 1">
            <tr>
                <td class="td_1">喜多龙广告ID：</td><td class="td_2"><input type="text" id="advid" name="advid" size="6" value="{$info.advid}"/><span class="_tips"> 填写一个广告ID</span></td>
            </tr>
            <tr>
                <td class="td_1">飞扬广告ID：</td><td class="td_2"><input type="text" id="advid1"  name="advid1" size="6" value="{$info.advid1}"/><span class="_tips"> 填写一个广告ID</span></td>
            </tr>
            <tr><td class="td_2">&nbsp;</td><td class="td_2">&nbsp;</td></tr>
            <tr>
                <td class="td_1">广告概率：</td><td class="td_2"> 喜多龙 <input type="text" id="percent" name="percent" size="3" onchange="change_percent(this)" value="{$info.percent}"/> %<span class="_tips"> (可填写0-100的整数)</span></td>
            </tr>
            <tr>
                <td class="td_1">&nbsp;</td><td class="td_2">&nbsp;&nbsp;&nbsp;飞扬 <input type="text" id="percent1" readonly name="percent1" size="3" value="{$info.percent1}"/> %</td>
            </tr>
        </if>
        <if condition="$info.typeid eq 2">
            <input type="hidden" id="option" name="option" value="">
            <tr>
                <td class="td_1">显示位置：</td><td class="td_2"><input type="checkbox"  name="options" <if condition="$info.opt1 eq 1">checked</if> value="1"/> 精选</td>
            </tr>
            <tr>
                <td class="td_1">&nbsp;</td><td class="td_2"><input type="checkbox" name="options" <if condition="$info.opt2 eq 2">checked</if> value="2"/> 论坛</td>
            </tr>
            <tr>
                <td class="td_1">显示概率：</td><td class="td_2"><input type="text" id="percent" name="percent" size="3" value="{$info.percent}"/> %<span class="_tips"> (可填写0-100的整数)</span></td>
            </tr>
            <tr>
                <td class="td_1">喜多龙广告ID：</td><td class="td_2"><input type="text" id="advid" name="advid" size="8" value="{$info.advid}"/><span class="_tips"> 填写一个广告ID</span></td>
            </tr>
        </if>
        <if condition="$info.typeid eq 3">
            <input type="hidden" id="count" value="{$count}">
            <tr>
                <td class="td_1">内容间隔数量：</td><td class="td_2"><input type="text" id="spacenum" name="spacenum" size="6" value="{$info.spacenum}"/><span class="_tips"> 可填写1-50的整数</span></td>
            </tr>
            <tr>
                <td class="td_1">广告显示数量：</td><td class="td_2"><input type="text" id="shownum" name="shownum" size="6" value="{$info.shownum}"/><span class="_tips"> 可填写1-100的整数</span></td>
            </tr>
            <tr>
                <td class="td_1" valign="top">喜多龙广告ID：</td><td class="td_2"><input type="file" id="advid" size="6" name="advid" onchange="check_filetype(this.value)"></td>
            </tr>
            <tr>
                <td class="td_1" valign="top">&nbsp;</td><td class="td_2"><span class="_tips">批量导入广告ID及广告尺寸，文件类型为.csv</span></td>
            </tr>
            <tr>
                <td class="td_1" valign="top">&nbsp;</td><td class="td_2">下载 <a href="__URL__/edit/down/down" style="color:blue">模板文件</a></td>
            </tr>
        </if>
        <if condition="$info.typeid eq 4">
            <tr>
                <td class="td_1">喜多龙广告ID：</td><td class="td_2"><input type="text" id="advid" name="advid" size="8" value="{$info.advid}"/><span class="_tips"> 填写一个广告ID</span></td>
            </tr>
            <tr>
                <td class="td_1">显示概率：</td><td class="td_2"><input type="text" id="percent" name="percent" size="3" value="{$info.percent}"/> %</td>
            </tr>
            <tr>
                <td class="td_1" valign="top">&nbsp;</td><td class="td_2"><span class="_tips">可填写0-100的整数</span></td>
            </tr>
        </if>
        <if condition="$info.typeid eq 5">
            <tr>
                <td class="td_1">奖励类型：</td><td class="td_2">
                    <select name="rewardtype"><option value="1" <if condition="$info.rewardtype eq 1">selected</if>>金币</option><option value="2"<if condition="$info.rewardtype eq 2">selected</if>>智豆</option></select>
                </td>
            </tr>
            <tr>
                <td class="td_1">每次奖励数量：</td><td class="td_2"><input type="text" id="rewardnum" name="rewardnum" size="6" value="{$info.rewardnum}"/><span class="_tips"> 可填写1-100的整数</span></td>
            </tr>
            <tr>
                <td class="td_1">喜多龙广告ID：</td><td class="td_2"><input type="text" id="advid" name="advid" size="8" value="{$info.advid}"/><span class="_tips"> 填写一个广告ID</span></td>
            </tr>
        </if>
        <tr><td class="td_2">&nbsp;</td><td class="td_2">&nbsp;</td></tr>
        <tr>
            <td class="td_1"><input type="button" class="search_btn" style="display:inline-block;" onclick="tb_remove();" value="取消" /></td>
            <td class="td_2">&nbsp;&nbsp;&nbsp;&nbsp;<input type="submit" name="submit"  onclick="return check()" class="search_btn" style="display:inline-block;" value="确定" />  
            </td>
        </tr>
    </table>
    </if>
    <if condition="$info.version == 3800">
    <table>
        <tr><td colspan="2"><h3>{$info.typename}</h3></td></tr>
        <if condition="$info.typeid eq 1">
            <tr>
                <td class="td_1">SDK广告ID：</td><td class="td_2"><input type="text" id="advid" name="advid2" size="6" value="{$info.advid2}"/><span class="_tips"> 填写一个广告ID</span></td>
            </tr>
            <tr>
                <td class="td_1">通用API广告ID：</td><td class="td_2"><input type="text" id="advid1"  name="advid3" size="6" value="{$info.advid3}"/><span class="_tips"> 填写一个广告ID</span></td>
            </tr>
            <tr><td class="td_2">&nbsp;</td><td class="td_2">&nbsp;</td></tr>
            <tr>
                <td class="td_1">广告概率：</td><td class="td_2"> SDK <input type="text" id="percent" name="percent" size="3" onchange="change_percent(this)" value="{$info.percent}"/> %<span class="_tips"> (可填写0-100的整数)</span></td>
            </tr>
            <tr>
                <td class="td_1">&nbsp;</td><td class="td_2">通用API <input type="text" id="percent1" readonly name="percent1" size="3" value="{$info.percent1}"/> %</td>
            </tr>
        </if>
        <if condition="$info.typeid eq 2">
            <input type="hidden" id="option" name="option" value="">
            <tr>
                <td class="td_1">显示位置：</td><td class="td_2"><input type="checkbox"  name="options" <if condition="$info.opt1 eq 1">checked</if> value="1"/> 精选</td>
            </tr>
            <tr>
                <td class="td_1">&nbsp;</td><td class="td_2"><input type="checkbox" name="options" <if condition="$info.opt2 eq 2">checked</if> value="2"/> 论坛</td>
            </tr>
            <tr>
                <td class="td_1">显示概率：</td><td class="td_2"><input type="text" id="percent" name="percent" size="3" value="{$info.percent}"/> %<span class="_tips"> (可填写0-100的整数)</span></td>
            </tr>
            <tr>
                <td class="td_1">SDK广告ID：</td><td class="td_2"><input type="text" id="advid" name="advid2" size="8" value="{$info.advid2}"/><span class="_tips"> 填写一个广告ID</span></td>
            </tr>
        </if>
        <if condition="$info.typeid eq 3">
            <input type="hidden" id="count" value="{$count}">
            <tr>
                <td class="td_1">内容间隔数量：</td><td class="td_2"><input type="text" id="spacenum" name="spacenum" size="6" value="{$info.spacenum}"/><span class="_tips"> 可填写1-50的整数</span></td>
            </tr>
            <tr>
                <td class="td_1">广告显示数量：</td><td class="td_2"><input type="text" id="shownum" name="shownum" size="6" value="{$info.shownum}"/><span class="_tips"> 可填写1-100的整数</span></td>
            </tr>
            <tr>
                <td class="td_1" valign="top">SDK广告ID：</td><td class="td_2"><input type="file" id="advid" size="6" name="advid" onchange="check_filetype(this.value)"></td>
            </tr>
            <tr>
                <td class="td_1" valign="top">&nbsp;</td><td class="td_2"><span class="_tips">批量导入广告ID及广告尺寸，文件类型为.csv</span></td>
            </tr>
            <tr>
                <td class="td_1" valign="top">&nbsp;</td><td class="td_2">下载 <a href="__URL__/edit/down/down" style="color:blue">模板文件</a></td>
            </tr>
        </if>
        <if condition="$info.typeid eq 4">
            <tr>
                <td class="td_1">SDK广告ID：</td><td class="td_2"><input type="text" id="advid" name="advid2" size="8" value="{$info.advid2}"/><span class="_tips"> 填写一个广告ID</span></td>
            </tr>
            <tr>
                <td class="td_1">显示概率：</td><td class="td_2"><input type="text" id="percent" name="percent" size="3" value="{$info.percent}"/> %</td>
            </tr>
            <tr>
                <td class="td_1" valign="top">&nbsp;</td><td class="td_2"><span class="_tips">可填写0-100的整数</span></td>
            </tr>
        </if>
        <if condition="$info.typeid eq 5">
            <tr>
                <td class="td_1">奖励类型：</td><td class="td_2">
                    <select name="rewardtype"><option value="1" <if condition="$info.rewardtype eq 1">selected</if>>金币</option><option value="2"<if condition="$info.rewardtype eq 2">selected</if>>智豆</option></select>
                </td>
            </tr>
            <tr>
                <td class="td_1">每次奖励数量：</td><td class="td_2"><input type="text" id="rewardnum" name="rewardnum" size="6" value="{$info.rewardnum}"/><span class="_tips"> 可填写1-100的整数</span></td>
            </tr>
            <tr>
                <td class="td_1">SDK广告ID：</td><td class="td_2"><input type="text" id="advid" name="advid2" size="8" value="{$info.advid2}"/><span class="_tips"> 填写一个广告ID</span></td>
            </tr>
        </if>
        <tr><td class="td_2">&nbsp;</td><td class="td_2">&nbsp;</td></tr>
        <tr>
            <td class="td_1"><input type="button" class="search_btn" style="display:inline-block;" onclick="tb_remove();" value="取消" /></td>
            <td class="td_2">&nbsp;&nbsp;&nbsp;&nbsp;<input type="submit" name="submit"  onclick="return check()" class="search_btn" style="display:inline-block;" value="确定" />  
            </td>
        </tr>
    </table>
    </if>
</form>
<script type="text/javascript">
    function check(){
        var _typeid = document.getElementById('typeid').value;
        var _version = document.getElementById('version').value;
        if(_typeid == 1){
            var advid1 = document.getElementById('advid1').value;
            if(advid1 == '' && _version == 3700){
                alert('飞扬广告ID未填写');
                return false;
            }else if(advid1 == '' && _version == 3800){
                alert('通用API广告ID未填写');
                return false;
            }
        }
        if(_typeid == 2){
            var _optionid = document.getElementById('option');
            var option = '';
            var _option = document.getElementsByName('options');
            for(var i = 0; i < _option.length; i++){
                if(_option[i].checked == true){
                    option += _option[i].value+',';
                }
            }
            if(option != ''){
                option = option.substr(0,option.length-1);
                _optionid.value = option;
            }else{
                alert('显示位置未填写');
                return false;
            } 
            var percent = document.getElementById('percent').value;
            if(percent == ''){
                alert('显示概率未填写');
                return false;
            }else{
                var res = check_num(percent,0);
                if(res == 1){
                    alert('你输入的值大于100');
                    return false;
                }
                if(res == 2){
                    alert('你输入的值小于0');
                    return false;
                }
                if(res == 3){
                    alert('请输入0-100的整数值');
                    return false;
                }
            }
        }
        if(_typeid == 3){
            var spacenum = document.getElementById('spacenum').value;
            var shownum = document.getElementById('shownum').value;
            var count = document.getElementById('count').value;
            if(spacenum == ''){
                alert('内容间隔数量未填写');
                return false;
            }else{
                var res = check_num(spacenum,1);
                if(res == 1 || spacenum > 50){
                    alert('你输入的值大于50');
                    return false;
                }
                if(res == 2){
                    alert('你输入的值小于1');
                    return false;
                }
                if(res == 3){
                    alert('请输入1-100的整数值');
                    return false;
                }
            }
            if(shownum == ''){
                alert('广告显示数量未填写');
                return false;
            }else{
                var res = check_num(shownum,1);
                if(res == 1){
                    alert('你输入的值大于100');
                    return false;
                }
                if(res == 2){
                    alert('你输入的值小于1');
                    return false;
                }
                if(res == 3){
                    alert('请输入1-100的整数值');
                    return false;
                }
            }
            if(count == '0'){
                var advid = document.getElementById('advid').value;
                if(advid == '' && _version == 3700){
                    alert('喜多龙广告ID文件未填写');
                    return false;
                }else if(advid == '' && _version == 3800){
                    alert('SDK广告ID文件未填写');
                    return false;
                }
            }
        }else{
            var advid = document.getElementById('advid').value;
            if(advid == '' && _version == 3700){
                alert('喜多龙广告ID未填写');
                return false;
            }else if(advid == '' && _version == 3800){
                alert('SDK广告ID未填写');
                return false;
            }
        }
        if(_typeid == 4){
            var percent = document.getElementById('percent').value;
            if(percent == ''){
                alert('显示概率未填写');
                return false;
            }else{
                var res = check_num(percent,0);
                if(res == 1){
                    alert('你输入的值大于100');
                    return false;
                }
                if(res == 2){
                    alert('你输入的值小于0');
                    return false;
                }
                if(res == 3){
                    alert('请输入0-100的整数值');
                    return false;
                }
            }
        }
        if(_typeid == 5){
            var rewardnum = document.getElementById('rewardnum').value;
            if(rewardnum == ''){
                alert('奖励数量未填写');
                return false;
            }else{
                var res = check_num(rewardnum,1);
                if(res == 1){
                    alert('你输入的值大于100');
                    return false;
                }
                if(res == 2){
                    alert('你输入的值小于1');
                    return false;
                }
                if(res == 3){
                    alert('请输入1-100的整数值');
                    return false;
                }
            }
        }
    }

    function change_percent(obj){
        var val1 = obj.value;
        var val2 = 100-parseInt(val1);
        var percent1 = document.getElementById('percent1');
        percent1.value = val2;
    }

    //判断输入的值是否为整数
    function check_num(str,min){
        if((str | 0) == str){
            if(str > 100){
                return 1;
            }
            if (str < min){
                return 2;
            }
        }else{
            return 3;
        }
    }

    function check_filetype(filename){
        var ext = filename.substr(filename.lastIndexOf(".")+1);
        if(ext != 'csv'){
            alert('上传文件格式错误！');
        }
    }
</script>
