<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--<<<<<<< .mine
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>软件反馈过滤规则列表</title>
        <style type="text/css">
            body, td, th {font-size: 12px;height:35px;}
        </style>
        {//时间插件开始}
        <script type="text/javascript" src="/Public/js/My97DatePicker/WdatePicker.js"></script>
        {//时间插件结束}
        <link rel="stylesheet" type="text/css" href="/Public/css/tablelist.css" />
        <script type="text/javascript" src="__PUBLIC__/school/js/jquery-1.6.2.min.js"></script>
        <script type="text/javascript" src="__PUBLIC__/school/js/jquery-ui-1.8.16.custom.min.js"></script>
        <script type="text/javascript" src="/Public/js/json2.js"></script>
    </head>
    <body>
        <div style="width:99%; margin-top:4px">
            <div class="search_box">
                <form action="__URL__/ShowWhitelist" method="get">
                    <table width="99%" cellpadding="0" cellspacing="0">
                        <tbody align="middle">
                            <td >规则关键字：
                                <input type="text" name="feedbackword" id="feedbackword" value="{$seach_val}" ></td>			
                            <td >
                                部门：
                                <select name="sectiontype">
                                    <option>全部</option>
                                    <?php foreach($sectiontype as $key=>$section): ?>				
                                    <option value='<?php echo $key;?>' <?php if($key == 1): ?> selected="selected" <?php endif;?> >
                                            <?php echo $section; ?></option>
                                    <?php endforeach; ?>
                                </select>
                                &nbsp&nbsp&nbsp&nbsp
                                反馈主题：
                                <select name="dev_type">
                                    <option>全部</option>
                                    <?php foreach($feedbacktype as $key=>$feedback): ?>				
                                    <option value='<?php echo $key;?>' <?php if($key == 1): ?> selected="selected" <?php endif;?> >
                                            <?php echo $feedback; ?></option>
                                    <?php endforeach; ?>
                                </select>
                                &nbsp&nbsp	
                                <td>起止时间:</td>
                                <td width="300" colspan='3'><?php showDatePicker('fromdate','todate', $fromdate,$todate);?>
                                    <input type="submit" value="搜索">
                                </td>
                        </tbody>
                    </table>
                </form>
            </div>
=======-->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>软件反馈过滤规则列表</title>
<style type="text/css">
body, td, th {font-size: 12px;height:35px;}
</style>
{//时间插件开始}
<script type="text/javascript" src="/Public/js/My97DatePicker/WdatePicker.js"></script>
{//时间插件结束}
<link rel="stylesheet" type="text/css" href="/Public/css/tablelist.css" />
<script type="text/javascript" src="__PUBLIC__/school/js/jquery-1.6.2.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/school/js/jquery-ui-1.8.16.custom.min.js"></script>
<script type="text/javascript" src="/Public/js/json2.js"></script>
</head>
<body>
<div style="width:99%; margin-top:4px">
	<div class="search_box">
		<form action="__URL__/ShowWhitelist" method="get">
		<table width="99%" cellpadding="0" cellspacing="0">
			<tbody align="middle">
				<td >规则关键字：
				<input type="text" name="feedbackword" id="feedbackword" value="{$seach_val}" ></td>			
				<td >
				部门：
				<select name="sectiontype">
					<option>全部</option>
					<?php foreach($sectiontype as $key=>$section): ?>				
					<option value='<?php echo $key;?>' <?php if($key == 1): ?> selected="selected" <?php endif;?> >
					<?php echo $section; ?></option>
					<?php endforeach; ?>
				</select>
				&nbsp&nbsp&nbsp&nbsp
				反馈主题：
				<select name="dev_type">
					<option>全部</option>
					<?php foreach($feedbacktype as $key=>$feedback): ?>				
					<option value='<?php echo $key;?>' <?php if($key == 1): ?> selected="selected" <?php endif;?> >
					<?php echo $feedback; ?></option>
					<?php endforeach; ?>
				</select>
				&nbsp&nbsp	
				<td>起止时间:</td>
	<td width="300" colspan='3'><?php showDatePicker('fromdate','todate', $fromdate,$todate);?>
				<input type="submit" value="搜索">
				</td>
			</tbody>
		</table>
	</form>
	</div>
	
	<div style="margin:10px;float:left;">
	<button style="float:left; margin-right:15px; display:inline; cursor:pointer;" onclick="popup('_add_div')" class="search_btn">添加</button><br />
	{$count}条记录
	</div>
	<table cellpadding="0" cellspacing="0" style="margin-top:10px" class="table_list">
		<thead>
			<tr align="center">				
				<th width="15%" bgcolor="#E3E2FE">优先级</th>
				<th width="35%" bgcolor="#E3E2FE">规则</th>
				<th width="13%" bgcolor="#E3E2FE">分配部门</th>
				<th width="10%" bgcolor="#E3E2FE">添加时间</th>
				<th width="14%" bgcolor="#E3E2FE">操作人</th>
				<th width="14%" bgcolor="#E3E2FE">操作</th>
			</tr>
		</thead>
		<tbody>
			<?php foreach($list as $row): ?>
				<tr>
					<td>
					<select class='extent_rank' rel=<?php echo $row['id'];?> >
					   <?php for($i=1;$i<$num ;$i++): ?>
					       	<option <?php if($row['rank']==$i){ ?> selected='selected' <?php } ?> value=<?php echo $i;?>    ><?php echo $i; ?></option>
    				   <?php endfor; ?>					
					</select>
					</td>
					<td>{$row.filterword}</td>
					<td><?php echo $sectiontype[$row['sectiontypeid']];  ?></td>
					<td><?php echo $row['update_time'] ? date("Y-m-d",$row['update_time']) : '' ?></td>
					<td><?php echo $username[$row['admin_id']];  ?></td>
					<td align="center">						
						<a style="cursor:pointer;" href="javascript:void(0);" onclick="edit({$piracyList.id})" class="blue">编辑</a>&nbsp&nbsp
						<a href="javascript:void(0);" onclick="deleteOne({$piracyList.id})" class="blue">删除</a>
					</td>
				</tr>
			<?php endforeach; ?>
		</tbody>
	</table>
</div>
<div id="_add_div" style="position:absolute;top:150px;left:350px;display:none;background:#EEEEEE;width:650px;height:auto;border:1px solid #000;font-size:14px;">
	<form name="form_add" method="post" action="__URL__/addfilter"  
	onsubmit="return form_chk_add()" id="_form_add"  style="width:100%;height:100%;">
	<table border="0" cellspacing="0" cellpadding="0" style="width:100%;height:100%;" class="tb_add">
		<tr>
			<td class="td1" colspan="2" >系统内置规则：
			<select name='rank' >
			<?php for($i=1;$i<=$num;$i++):  ?>				    
				<option value="<?php echo $i; ?>"><?php echo $i; ?> </option>				 
			<?php endfor; ?>		
			</select>
			</td>
		</tr>
		<tr>
		<td colspan="3"><input  name='filter' type='radio' checked="checked" value='0'  />将符合下列条件之一的反馈自动分配到指定部门</td>
		</tr>
		<tr>
		<td colspan="3"><input name='filter' type='radio' value='1' />将同时符合下列所有条件的反馈自动分配到指定部门</td>
		</tr>
		<tr>
		<td colspan="3">反馈主题为：
			<input name='backtype' type='radio' value='1'/>下载问题
			<input name='backtype' type='radio' value='2'/>安装问题
			<input name='backtype' type='radio' value='3'/>软件使用问题
			<input name='backtype' type='radio' value='5'/>建议意见
			<input name='backtype' type='radio' value='4'/>其它问题
		</td>		
		</tr>
		<tr>
			<td>反馈内容包含：</td><td><input name='feedbackword[]' value='' /></td><td>
			<a href="javascript:;" id="add_table" style="font-size:30px;text-decoration: none;color:#000" rel="">+</a>&nbsp;&nbsp; 
			</td>
       </tr>		                   
        <tr>
		<td colspan="3">英文及特殊字符长度: 大于<input name='wordlenght' type='text' value=''/>字</td>
		</tr>  
		<tr>
			<td class="td1" colspan="2" >分配至：
			<select name='sectiontypeid' id='sectiontypeid'>
				<option value=0>请选择</option>
				<volist name="sectiontype" id="sectiontype" key='k'>
				<option value='{$k}'>{$sectiontype}</option>
				</volist>
			</select></td>
		</tr> 
		<tr id="cut_add_input">
			<td colspan="2" style="text-align:center;"><button style="margin:15px;" type="submit" >确定</button><input name="sub_type" type="hidden" value="add" /><button type="button" onclick="popclose('_add_div')">取消</button></td>
		</tr>
	</table>
	</form>
</div>
<div id="_edit_div" style="position:absolute;top:150px;left:350px;display:none;background:#EEEEEE;width:650px;height:200px;border:1px solid #000;font-size:14px;">
	<form name="form_add" method="post" action="__URL__/EditWhitelist" onsubmit="return form_chk_edit()" style="width:100%;height:100%;">
	<input type="hidden" id="edit_id" name="edit_id" value=""/>
	<table border="0" cellspacing="0" cellpadding="0" style="width:100%;height:100%;" class="tb_add">
		<tr>
			<td class="td1" align="left" colspan="2" style="padding-left:11px;font-weight:bold;">编辑过滤规则：</td>
		</tr>
		<tr>
		    <td class="td1" align="right">输入包名：</td><td align="left" style="padding-left:10px;"><input type="text" value="" name="package[]"  id="edit_package" readonly="readonly" style="color:#999" /></td>
			<td class="td1" align="right">软件名称：</td><td align="left" style="padding-left:10px;"><input type="text" value="" name="softname[]" id="edit_softname" /></td>
		</tr>
		<tr>
			<td class="td1" align="right">定时上架:</td>
			<td align="left" style="padding-left:10px;">
			<input type="radio" value="0" name="is_shelves[]" id="is_shelves0"  />否
			<input type="radio" value="1" name="is_shelves[]" id="is_shelves1" />是</td>
			
			<td class="td1" align="right">接入sdk:</td>
			<td align="left" style="padding-left:10px;">
			<input type="radio" value="0" name="is_sdk[]" id="is_sdk0"  />否
			<input type="radio" value="1" name="is_sdk[]" id="is_sdk1" />是</td>
		</tr>
		<tr>
			<td class="td1" align="right">是否干预搜索结果:</td>
			<td align="left" style="padding-left:10px;">
			<input type="radio" value="0" name="is_intervres[]" id="is_intervres0" onclick="is_interv('',false)" />否
			<input type="radio" value="1" name="is_intervres[]" id="is_intervres1" onclick="is_interv('',true)"/>是</td>
			
			<td class="td1" align="right" id="runintro">软件运营指数:</td>
			<td align="left" style="padding-left:10px;">
			<input type="text" value="" name="runindex" id="runindex"  />
		</tr>            
		<tr>
			<td colspan="2" style="text-align:center;"><button style="margin-right:15px;" type="submit">确定</button><input name="sub_type" type="hidden" value="edit" /><button type="button" onclick="popclose('_edit_div')">取消</button></td>
		</tr>
	</table>
	</form>
</div>
<div  align='left'>{$page}</div>
<style type="text/css">
	.error_msg{height: 25px;}
</style>
<script type="text/javascript">
	var  shelves = 0;
	var  p_key = 0;
	var  s_key = 0;
	var  dev_name_key = 0;
	var  dev_id_key = 0;
        var intervres_key = 0;
        var run_key = 0;
    $('#add_table').click(function(){
		shelves++;
		p_key++;
		s_key++;
		dev_name_key++;
		dev_id_key++;
                intervres_key++;
                run_key++;
		var str = '<tr><td></td><td><input name="feedbackword[]" value="" /></td></tr>';
		$(this).closest('tr').after(str);
	});
	$('#cut_table').click(function(){
		//$('tr#cut_add_input').prev('tr.add_table').remove();
		$(this).closest('table').find('tr.add_table:eq(0)').remove();	
		$(this).closest('table').find('tr.add_table:eq(0)').remove();
                $(this).closest('table').find('tr.add_table:eq(0)').remove();
		//$(this).closest('tr').next('tr.add_table').remove();
		//alert($(this).closest('tr').html());
	});

            <div style="margin:10px;float:left;">
                <button style="float:left; margin-right:15px; display:inline; cursor:pointer;" onclick="popup('_add_div')" class="search_btn">添加</button><br />
                {$count}条记录
            </div>
            <table cellpadding="0" cellspacing="0" style="margin-top:10px" class="table_list">
                <thead>
                    <tr align="center">				
                        <th width="15%" bgcolor="#E3E2FE">优先级</th>
                        <th width="35%" bgcolor="#E3E2FE">规则</th>
                        <th width="13%" bgcolor="#E3E2FE">分配部门</th>
                        <th width="10%" bgcolor="#E3E2FE">添加时间</th>
                        <th width="14%" bgcolor="#E3E2FE">操作人</th>
                        <th width="14%" bgcolor="#E3E2FE">操作</th>
                    </tr>
                </thead>
                <tbody>
                    <?php foreach($list as $row): ?>
                    <tr>
                        <td>
                            <select class='extent_rank' rel=<?php echo $row['id'];?> >
                                    <?php for($i=1;$i<$num ;$i++): ?>
                                    <option value=<?php echo $i;?> 
                                    <?php if($row['rank']==$i){ echo 'selected="selected"'; } ?>  ><?php echo $i; ?></option>
                                <?php endfor; ?>					
                            </select>
                        </td>
                        <td>{$row.filterword}</td>
                        <td><?php echo $sectiontype[$row['sectiontypeid']];  ?></td>
                        <td><?php echo $row['update_time'] ? date("Y-m-d",$row['update_time']) : '' ?></td>
                        <td><?php echo $username[$row['admin_id']];  ?></td>
                        <td align="center">						
                            <a style="cursor:pointer;" href="javascript:void(0);" onclick="edit({$row.id})" class="blue">编辑</a>&nbsp&nbsp
                            <a href="javascript:void(0);" onclick="deleteOne({$piracyList.id})" class="blue">删除</a>
                        </td>
                    </tr>
                    <?php endforeach; ?>
                </tbody>
            </table>
        </div>
        <div id="_add_div" style="position:absolute;top:150px;left:350px;display:none;background:#EEEEEE;width:650px;height:auto;border:1px solid #000;font-size:14px;">
            <form name="form_add" method="post" action="__URL__/addfilter"  
                  onsubmit="return form_chk_add()" id="_form_add"  style="width:100%;height:100%;">
                <table border="0" cellspacing="0" cellpadding="0" style="width:100%;height:100%;" class="tb_add">
                    <tr>
                        <td class="td1" colspan="2" >系统内置规则：
                            <select name='rank' >
                                <?php for($i=1;$i<=$num;$i++):  ?>				    
                                <option value="<?php echo $i; ?>"><?php echo $i; ?> </option>				 
                                <?php endfor; ?>		
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="3"><input  name='filter' type='radio' checked="checked" value='0'  />将符合下列条件之一的反馈自动分配到指定部门</td>
                    </tr>
                    <tr>
                        <td colspan="3"><input name='filter' type='radio' value='1' />将同时符合下列所有条件的反馈自动分配到指定部门</td>
                    </tr>
                    <tr>
                        <td colspan="3">反馈主题为：
                            <input name='backtype' type='radio' value='1'/>下载问题
                            <input name='backtype' type='radio' value='2'/>安装问题
                            <input name='backtype' type='radio' value='3'/>软件使用问题
                            <input name='backtype' type='radio' value='5'/>建议意见
                            <input name='backtype' type='radio' value='4'/>其它问题
                        </td>		
                    </tr>
                    <tr>
                        <td>反馈内容包含：</td><td><input name='feedbackword[]' value='' /></td><td>
                            <a href="javascript:;" id="add_table" style="font-size:30px;text-decoration: none;color:#000" rel="">+</a>&nbsp;&nbsp; 
                        </td>
                    </tr>		                   
                    <tr>
                        <td colspan="3">英文及特殊字符长度: 大于<input name='wordlenght' type='text' value=''/>字</td>
                    </tr>  
                    <tr>
                        <td class="td1" colspan="2" >分配至：
                            <select name='sectiontypeid' id='sectiontypeid'>
                                <option value=0>请选择</option>
                                <volist name="sectiontype" id="sectiontype" key='k'>
                                    <option value='{$k}'>{$sectiontype}</option>
                                </volist>
                            </select></td>
                    </tr> 
                    <tr id="cut_add_input">
                        <td colspan="2" style="text-align:center;"><button style="margin:15px;" type="submit" >确定</button><input name="sub_type" type="hidden" value="add" /><button type="button" onclick="popclose('_add_div')">取消</button></td>
                    </tr>
                </table>
            </form>
        </div>
        <div id="_edit_div" style="position:absolute;top:150px;left:350px;display:none;background:#EEEEEE;width:650px;height:500px;border:1px solid #000;font-size:14px;">
            <form name="form_add" method="post" action="__URL__/editfilter" onsubmit="return form_chk_edit()" style="width:100%;height:100%;">
                <table border="0" cellspacing="0" cellpadding="0" style="width:100%;height:100%;" class="tb_add">
                    <tr>
                        <td class="td1" colspan="2" >优先级：
                            <select name='editrank' id="editrank">
                                <?php for($i=1;$i<=$num;$i++):  ?>				    
                                <option value="<?php echo $i; ?>"><?php echo $i; ?> </option>				 
                                <?php endfor; ?>		
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="3"><input  name='editfilter'  type='radio' checked="checked" value='0'  />将符合下列条件之一的反馈自动分配到指定部门</td>
                    </tr>
                    <tr>
                        <td colspan="3"><input name='editfilter' type='radio' value='1' />将同时符合下列所有条件的反馈自动分配到指定部门</td>
                    </tr>
                    <tr>
                        <td colspan="3">反馈主题为：
                            <input name='editbacktype' type='radio' value='1'/>下载问题
                            <input name='editbacktype' type='radio' value='2'/>安装问题
                            <input name='editbacktype' type='radio' value='3'/>软件使用问题
                            <input name='editbacktype' type='radio' value='5'/>建议意见
                            <input name='editbacktype' type='radio' value='4'/>其它问题
                        </td>		
                    </tr>
                    <tr>
                        <td>反馈内容包含：</td><td><input name='editfeedbackword[]' value='' class='edit'/></td><td>
                            <a href="javascript:;" id="edit_add_table" style="font-size:30px;text-decoration: none;color:#000" rel="">+</a>&nbsp;&nbsp; 
                        </td>
                    </tr>		                   
                    <tr>
                        <td colspan="3">英文及特殊字符长度: 大于<input name='editwordlenght' type='text' value=''/>字</td>
                    </tr>  
                    <tr>
                        <td class="td1" colspan="2" >分配至：
                            <select name='editsectiontypeid' id='editsectiontypeid'>
                                <option value=0>请选择</option>
                                <volist name="sectiontype" id="sectiontype" key='k'>
                                    <option value='{$k}'>{$sectiontype}</option>
                                </volist>
                            </select></td>
                    </tr> 
                    <tr id="cut_add_input">
                        <td colspan="2" style="text-align:center;"><button style="margin:15px;" type="submit" >确定</button><input name="sub_type" type="hidden" value="add" /><button type="button" onclick="popclose('_add_div')">取消</button></td>
                    </tr>
                </table>	
            </form>
        </div>
        <div  align='left'>{$page}</div>
        <style type="text/css">
            .error_msg{height: 25px;}
        </style>
        <script type="text/javascript">
                    var shelves = 0;
                    var p_key = 0;
                    var s_key = 0;
                    var dev_name_key = 0;
                    var dev_id_key = 0;
                    var intervres_key = 0;
                    var run_key = 0;
                    $('#add_table').click(function(){
                    shelves++;
                    p_key++;
                    s_key++;
                    dev_name_key++;
                    dev_id_key++;
                    intervres_key++;
                    run_key++;
                    var str = '<tr><td></td><td><input name="feedbackword[]" value="" /></td></tr>';
                    $(this).closest('tr').after(str);
            });
                    $('#cut_table').click(function(){
                    //$('tr#cut_add_input').prev('tr.add_table').remove();
                    $(this).closest('table').find('tr.add_table:eq(0)').remove();
                    $(this).closest('table').find('tr.add_table:eq(0)').remove();
                    $(this).closest('table').find('tr.add_table:eq(0)').remove();
                    //$(this).closest('tr').next('tr.add_table').remove();
                    //alert($(this).closest('tr').html());
            });
                    $('input.package').live('blur', function(){
                    var packages = $.trim($(this).val());
                    var url = '__URL__/GetSoftname';
                    var data = '&package=' + packages;
                    var _this = $(this);
                    $.ajax({
                    url: url,
                            type: 'POST',
                            data: data,
                            dataType: 'json',
                            success: function(data){
                            if (!!data && data.success){
                            _this.closest('tr').find('input.softname').val(data.softname);
                                    _this.closest('tr').find('input.dev_id').val(data.dev_id);
                                    _this.closest('tr').find('input.dev_name').val(data.dev_name);
                                    _this.closest('td').find('div.error_msg').html('');
                            } else{
=======
	function deleteOne(pid)
	{
		if (!confirm("确定要删除该项么？"))
			return false;
		window.location="__URL__/DeleteWhite/id/%5b%22" + pid + "%22%5d";
	}
	var flag = false;
	function selectAll()
	{
		if(!flag){
			$("[name='id[]']").each(function(){
				$(this).attr('checked',true);
			});
			
			flag = true;
			return;
		}
		if(flag){
			$("[name='id[]']").each(function(){
				$(this).attr('checked',false);
			});
			
			flag = false;
			return;
		}	
	}
	
	
	//排序
	$('.extent_rank').change(function(){
		var url = '__URL__/changerank/id/'+$(this).attr('rel')+'/rank/'+$(this).val();
		$.ajax({
			type: "GET",
			url : url,
			success: function(response){
					alert(response);
                            _this.closest('td').find('div.error_msg').html(data.msg);
                            }
                            },
                            error: function(){
                            _this.closest('td').find('div.error_msg').html('服务器错误');
                            }
                    })
            });
                    function deleteOne(pid)
                    {
                    if (!confirm("确定要删除该项么？"))
                            return false;
                            window.location = "__URL__/DeleteWhite/id/%5b%22" + pid + "%22%5d";
                    }
            var flag = false;
                    function selectAll()
                    {
                    if (!flag){
                    $("[name='id[]']").each(function(){
                    $(this).attr('checked', true);
                    });
                            flag = true;
                            return;
                    }
                    if (flag){
                    $("[name='id[]']").each(function(){
                    $(this).attr('checked', false);
                    });
                            flag = false;
                            return;
                    }
                    }


            //排序
            $('#extent_rank').change(function(){
            var url = '__URL__/changerank/id/' + $(this).attr('rel') + '/pos/' + $(this).val() + '/reason_type/';
                    $.ajax({
                    type: "GET",
                            url : url,
                            success: function(response){

                            }
                    });
            });
                    function form_chk_add(){

                    $sectiontypeid = $("#sectiontypeid").val();
                            if ($sectiontypeid <= 0){
                    alert('请选择分配部门'); return false;
                    }
                    }

            function form_chk_edit() {
            if ($('#edit_softname').val() == '') {
            alert("请填写软件名称！");
                    return false;
            }
            if ($('#edit_package').val() == '') {
            alert("请填写软件名称！");
                    return false;
            }
            if (isNaN($('#runindex').val())){
            alert("请输入数字！");
                    return false;
            }
            if ($('input:radio[name="is_intervres[]"]:checked').val() == 1){
            if ($('#runindex').val() == " "){
            alert("请输入运营指数!");
                    return false;
            }
            if ($('#runindex').val() < 0 || $('#runindex').val() > 100){
            alert("运营指数为0-100的整数！");
                    return false;
            }
            if (parseInt($('#runindex').val()) != $('#runindex').val()){
            alert("请输入整数！");
                    return false;
            }
            }
            return true;
            }

            function popup(id) {
            $("#bgdiv").css("display", "block");
                    $("#bgdiv").css({width:$(document).width() + "px", height:$(document).height() + "px"});
                    $(".intervclass").eq(0).attr("checked", 'checked');
                    $(".runclass").css("display", "none");
                    $("#" + id).css({display:"block", position:"absolute", zIndex:"10001"});
                    $("#" + id).css("top", ($(window).height() - $("#" + id)[0].offsetHeight) / 2 + $(document).scrollTop() + "px");
                    $("#" + id).css("left", ($(window).width() - $("#" + id)[0].offsetWidth) / 2 + $(document).scrollLeft() + "px");
            }

            function popclose(id) {
            $(".intervclass[value=0]").attr("checked", 'checked');
                    $(".runclass").css("display", "none");
                    $("#" + id).css({display:"none"});
                    $("#bgdiv").css({display:"none"});
            }

            function edit(rowid) {
            //alert(rowid);
            var feedbackwords = new Array();
            var url = "__URL__/filter_edit";
                    var data = '&id=' + rowid;
                    $.ajax({
            url: url,
            type: 'POST',
            data: data,
            dataType: 'json',
            success: function(data) {
                if (data) {
                    $("#editrank").val(data.rank);
                    $("input[name=editfilter][value="+data.filter+"]").attr("checked",'checked');
                    $("input[name=editbacktype][value="+data.backtype+"]").attr("checked",'checked');
                    feedbackwords = data.feedbackword.split('||');
//                    alert(feedbackwords)
//                    alert($('.edit').size());
                    if(feedbackwords.length>$('.edit').size()){
//                        alert(feedbackwords.length-$('.edit').size())
                        var addtrnum = feedbackwords.length-$('.edit').size();
                        for(i=0;i<addtrnum;i++){
                            var str = '<tr><td></td><td><input name="feedbackword[]" value="" class = "edit" /></td></tr>';
                            $('#edit_add_table').closest('tr').after(str);                           
                        }
                    }
                    for(i=0;i<feedbackwords.length;i++){
                        $('.edit').each(function(j){
                            if(i==j){
                                $(this).val(feedbackwords[i])
                            }
                        })
                    }
                    $("input[name=editwordlenght]").val(data.wordlenght);
                } else {
                    alert('获取数据失败！');
                }
            },
            error: function() {
                alert('服务器错误');
            }
        })
                        popup("_edit_div");
        //                
            }

            function is_interv(id, bool){
            if (bool){
            $('#runindex' + id).css('display', '');
                    $('#runintro' + id).css('display', '');
            } else{
            $('#runindex' + id).css('display', 'none');
                    $('#runintro' + id).css('display', 'none');
            }
            }
        </script>
    </body>
</html>
