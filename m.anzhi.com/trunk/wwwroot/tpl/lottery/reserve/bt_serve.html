<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<meta content="telephone=no" name="format-detection">
<meta name="keywords" content="" />
<meta name="description" content="" />
<title>海量元宝钻石，上线送高V，下载畅玩，不花钱也能当土豪！</title>
<link type="text/css" rel="stylesheet" href="<!--{$out.new_static_url}-->/activity/<!--{$out.prefix}-->/css/common2.css?v1"/>
<script type="text/javascript"  src="http://img4.anzhi.com/static/public/js/jquery-1.8.0.min.js"></script>
<!--{if $out['is_test'] == 1}-->
<script type="text/javascript" src="/js/debug.js"></script>
<script type="text/javascript" src="/js/pc_soft_list.js"></script>
<!--{/if}-->
<script type="text/javascript">
    (function (doc, win) {
    	var docEl = doc.documentElement,
        resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
        recalc = function () {
            var clientWidth = docEl.clientWidth;
            if (!clientWidth) return;
            if(clientWidth>=640){
				docEl.style.fontSize = '100px';
			}else{
				docEl.style.fontSize = 100 * (clientWidth / 640) + 'px';
			}
        };
	    // Abort if browser does not support addEventListener
	    if (!doc.addEventListener) return;
	    win.addEventListener(resizeEvt, recalc, false);
	    doc.addEventListener('DOMContentLoaded', recalc, false);
	   //以640像素设计图为准 ，1rem代表100像素
	})(document, window);
</script>
<script type="text/javascript">
	$(function(){
		$('.person_01').get(0).addEventListener("webkitAnimationEnd", function(){
			$(this).css('display','none').removeClass('person_01_act');
			$('.person_02').css('display','block').addClass('person_02_act');
		})
		$('.person_02').get(0).addEventListener("webkitAnimationEnd", function(){
			$(this).css('display','none').removeClass('person_02_act');
			$('.person_03').css('display','block');
			$('.light_01').css('display','block').addClass('light_01_act')
		})
		$('.light_01').get(0).addEventListener("webkitAnimationEnd", function(){
			$('.txt_01').css('display','block').addClass('txt_01_act');
			$(this).css('display','none').removeClass('light_01_act');
		})
		$('.txt_01').get(0).addEventListener("webkitAnimationEnd", function(){
			$('.txt_01').css('display','block').addClass('txt_01_act');
			setTimeout(function(){
				$('.txt_01').css('display','none').removeClass('txt_01_act');
				$('.person_03').css('display','none');
				$('.person_01').css('display','block').addClass('person_01_act');
			},3000)
		})
	})
</script>
</head>
<body>
<div class="banner" id="top">
    <img src="<!--{$out.new_static_url}-->/activity/<!--{$out.prefix}-->/images/banner.png"/>
</div>
<div class="main"> 
	<div class="infor_wrap">
		<div class="infor">
			<div class="person_01 person_01_act"><img src="<!--{$out.new_static_url}-->/activity/<!--{$out.prefix}-->/images/person_01.png"/></div>
			<div class="person_02" id="person_02"><img src="<!--{$out.new_static_url}-->/activity/<!--{$out.prefix}-->/images/person_02.png"/></div>
			<div class="person_03"><img src="<!--{$out.new_static_url}-->/activity/<!--{$out.prefix}-->/images/person_03.png"/></div>
			<div class="light_01"><img src="<!--{$out.new_static_url}-->/activity/<!--{$out.prefix}-->/images/light_01.png"/></div>
			<div class="txt_01"><img src="<!--{$out.new_static_url}-->/activity/<!--{$out.prefix}-->/images/txt_01.png"/></div>
		</div>
	</div>
	<div class="app">
		<ul class="soft-list clear">
		<!--{foreach from=$out.gm_one item='val' key='k'}-->
			<li>
				<div onclick="indetailApp('<!--{$val}-->')" >
					<img id='<!--{$out.soft_info[$val]['softid']}-->_pic' src="<!--{$out.soft_info[$val]['iconurl']}-->"  />
					<h3><!--{$out.soft_info[$val]['softname']}--></h3>
					<p><!--{$out.soft_info[$val]['short']}--></p>
				</div>
				<a class='but but_down'  id="<!--{$out.soft_info[$val]['softid']}-->_btn2" ></a>
				<div class="clear"></div>
			</li>
		<!--{/foreach}-->			
		</ul>		
	</div>
	<div class="infor_wrap2">
		<div class="infor_wrap2_img" >
			<img src="<!--{$out.new_static_url}-->/activity/<!--{$out.prefix}-->/images/img2.jpg"/>
		</div>
			<div class="clear"></div>
	</div>
	<div class="app2">	
		<ul class="soft-list clear">
		<!--{foreach from=$out.gm_two item='val' key='k'}-->
			<li>
				<div onclick="indetailApp('<!--{$val}-->')" >
					<img id='<!--{$out.soft_info[$val]['softid']}-->_pic' src="<!--{$out.soft_info[$val]['iconurl']}-->"  />
					<h3><!--{$out.soft_info[$val]['softname']}--></h3>
					<p><!--{$out.soft_info[$val]['short']}--></p>
				</div>
				<a class='but but_down'  id="<!--{$out.soft_info[$val]['softid']}-->_btn2" ></a>
				<div class="clear"></div>
			</li>
		<!--{/foreach}-->		
		</ul>			
	</div>
	<div class="infor_wrap3">
		<div class="infor_wrap3_img" >
			<img src="<!--{$out.new_static_url}-->/activity/<!--{$out.prefix}-->/images/img3.jpg"/>
		</div>
	</div>	
	<div class="app3">	
		<ul class="soft-list clear">
		<!--{foreach from=$out.gm_three item='val' key='k'}-->
			<li>
				<div onclick="indetailApp('<!--{$val}-->')" >
					<img id='<!--{$out.soft_info[$val]['softid']}-->_pic' src="<!--{$out.soft_info[$val]['iconurl']}-->"  />
					<h3><!--{$out.soft_info[$val]['softname']}--></h3>
					<p><!--{$out.soft_info[$val]['short']}--></p>
				</div>
				<a class='but but_down'  id="<!--{$out.soft_info[$val]['softid']}-->_btn2" ></a>
				<div class="clear"></div>
			</li>
		<!--{/foreach}-->	
		</ul>			
	</div>	
	<div class="infor_wrap4">
		<div class="infor_wrap4_img" >
			<img src="<!--{$out.new_static_url}-->/activity/<!--{$out.prefix}-->/images/img4.jpg"/>
		</div>
	</div>	
	<div class="app4">	
		<ul class="soft-list clear">
		<!--{foreach from=$out.gm_four item='val' key='k'}-->
			<li>
				<div onclick="indetailApp('<!--{$val}-->')" >
					<img id='<!--{$out.soft_info[$val]['softid']}-->_pic' src="<!--{$out.soft_info[$val]['iconurl']}-->"  />
					<h3><!--{$out.soft_info[$val]['softname']}--></h3>
					<p><!--{$out.soft_info[$val]['short']}--></p>
				</div>
				<a class='but but_down' id="<!--{$out.soft_info[$val]['softid']}-->_btn2"></a>
				<div class="clear"></div>
			</li>
		<!--{/foreach}-->	
		</ul>			
	</div>		
	<div class="foot" style="margin-top:-30px;"></div>
</div>
</body>
</html>
 <script type="text/javascript">
var sid = '<!--{$out.sid}-->';
var aid = '<!--{$out.aid}-->';
$(document).ready(function () {
	setTimeout(function(){
		<!--{foreach from=$out.gm_one item='val' key='k'}-->
			my_soft("<!--{$val}-->",<!--{$out.soft_info[$val]['softid']}-->,"<!--{$out.soft_info[$val]['softname']}-->","<!--{$out.soft_info[$val]['version_code']}-->","<!--{$out.soft_info[$val]['filesize']}-->","<!--{$out.soft_info[$val]['iconurl']}-->","<!--{$out.soft_info[$val]['total_downloaded']}-->");
		<!--{/foreach}-->		
		<!--{foreach from=$out.gm_two item='val' key='k'}-->
			my_soft("<!--{$val}-->",<!--{$out.soft_info[$val]['softid']}-->,"<!--{$out.soft_info[$val]['softname']}-->","<!--{$out.soft_info[$val]['version_code']}-->","<!--{$out.soft_info[$val]['filesize']}-->","<!--{$out.soft_info[$val]['iconurl']}-->","<!--{$out.soft_info[$val]['total_downloaded']}-->");
		<!--{/foreach}-->		
		<!--{foreach from=$out.gm_three item='val' key='k'}-->
			my_soft("<!--{$val}-->",<!--{$out.soft_info[$val]['softid']}-->,"<!--{$out.soft_info[$val]['softname']}-->","<!--{$out.soft_info[$val]['version_code']}-->","<!--{$out.soft_info[$val]['filesize']}-->","<!--{$out.soft_info[$val]['iconurl']}-->","<!--{$out.soft_info[$val]['total_downloaded']}-->");
		<!--{/foreach}-->		
		<!--{foreach from=$out.gm_four item='val' key='k'}-->
			my_soft("<!--{$val}-->",<!--{$out.soft_info[$val]['softid']}-->,"<!--{$out.soft_info[$val]['softname']}-->","<!--{$out.soft_info[$val]['version_code']}-->","<!--{$out.soft_info[$val]['filesize']}-->","<!--{$out.soft_info[$val]['iconurl']}-->","<!--{$out.soft_info[$val]['total_downloaded']}-->");
		<!--{/foreach}-->		
	}, 500);
});
var soft_lists_go = [];
var limit = 1,p=0;
var proid_arr = getArgs();
var skinvc = proid_arr.skinvc;
function getArgs() {
	var args = {};
	var query = location.search.substring(1);
	var pairs = query.split("&");
	for(var i = 0; i < pairs.length; i++) {
			var pos = pairs[i].indexOf('=');
			if (pos == -1) continue;
			var argname = pairs[i].substring(0,pos);
			var value = pairs[i].substring(pos+1);
			value = decodeURIComponent(value);
			args[argname] = value;
	}
	return args;
}
function my_soft(pkg,softid,softname,version_code,file_size,iconurl,total_downloaded) {
	window.AnzhiActivitys.registerDownloadObserver(softid);
	window.AnzhiActivitys.registerInstallObserver(pkg);
	var json_data =  window.AnzhiActivitys.isInstalledApp(pkg,total_downloaded);
	var soft_status_gos = window.AnzhiActivitys.getDownloadStateForActivity(softid);
	get_soft_one(soft_status_gos,softid,pkg,softname,version_code,file_size,iconurl);	
}

function get_soft_one(soft_status,softid,my_package,softname,versioncode,size,src){
	var str = '';
	if(soft_status == 1){
		str = 'but but_down1';
	}else if(soft_status == 2 || soft_status == 3 || soft_status == 8){
		$("."+softid+"_btn").attr("onclick",'go_softinfo_down('+softid+',\''+my_package+'\',\''+softname+'\','+versioncode+','+size+',1)');
		$("#"+softid+"_btn2").attr("onclick",'go_softinfo_down('+softid+',\''+my_package+'\',\''+softname+'\','+versioncode+','+size+',0)');
		str = 'but but_down1';
	}else if(soft_status == 4){
		$("."+softid+"_btn").attr("onclick",'go_softinfo_down('+softid+',\''+my_package+'\',\''+softname+'\','+versioncode+','+size+',1)');
		$("#"+softid+"_btn2").attr("onclick",'go_softinfo_down('+softid+',\''+my_package+'\',\''+softname+'\','+versioncode+','+size+',0)');
		str = 'but but_down';
	}else if(soft_status == 5){
		$("."+softid+"_btn").attr("onclick",'installApp('+softid+',\''+my_package+'\')');	
		$("#"+softid+"_btn2").attr("onclick",'installApp('+softid+',\''+my_package+'\')');	
		str = 'but but_install';
	}else if(soft_status == 6){
		$("."+softid+"_btn").attr("onclick",'openApp(\''+my_package+'\','+softid+')');	
		$("#"+softid+"_btn2").attr("onclick",'openApp(\''+my_package+'\','+softid+')');	
		str = 'but but_open';		
	}else if(soft_status == 9){
		$("."+softid+"_btn").attr("onclick",'installApp('+softid+',\''+my_package+'\')');
		$("#"+softid+"_btn2").attr("onclick",'installApp('+softid+',\''+my_package+'\')');
		str = 'but but_down';
	}else if(soft_status == 10){
		$("."+softid+"_btn").attr("onclick","");	
		$("#"+softid+"_btn2").attr("onclick","");	
		str = 'but but_install';
	}else if(soft_status == -1){
		var soft_other_status = window.AnzhiActivitys.isInstalledApp(my_package,parseInt(versioncode));
		if(soft_other_status == -2){
			$("."+softid+"_btn").attr("onclick",'go_softinfo_down('+softid+',\''+my_package+'\',\''+softname+'\','+versioncode+','+size+',1)');
			$("#"+softid+"_btn2").attr("onclick",'go_softinfo_down('+softid+',\''+my_package+'\',\''+softname+'\','+versioncode+','+size+',0)');
			str = 'but but_down';	
		}else if(soft_other_status == -1){
			$("."+softid+"_btn").attr("onclick",'go_softinfo_down('+softid+',\''+my_package+'\',\''+softname+'\','+versioncode+','+size+',1)');	
			$("#"+softid+"_btn2").attr("onclick",'go_softinfo_down('+softid+',\''+my_package+'\',\''+softname+'\','+versioncode+','+size+',0)');
			str = 'but but_down';			
		}else if(soft_other_status == 0){
			$("."+softid+"_btn").attr("onclick",'openApp(\''+my_package+'\','+softid+')');	
			$("#"+softid+"_btn2").attr("onclick",'openApp(\''+my_package+'\','+softid+')');	
			str = 'but but_open';		
		}else if(soft_other_status == 1){
			$("."+softid+"_btn").attr("onclick","");
			$("#"+softid+"_btn2").attr("onclick","");
			str = 'but but_install';
		}
	}

	$("#"+softid+"_btn2").attr("class",str);
}

function openApp(pkg,softid){
	the_soft = [softid];
	$.ajax({
		url: '/lottery/vacation_gift_open.php',
		data: 'softid='+softid+'&sid='+sid+'&package='+pkg+'&aid='+aid,
		type: 'get',
		success: function(data){
			window.AnzhiActivitys.openAppForActivity(pkg,the_soft);
		}
	});
}


function go_softinfo_down(softid,my_package,softname,versioncode,size,is_details){
	$("."+softid+"_btn").removeAttr("onclick");
	$("#"+softid+"_btn2").removeAttr("onclick").attr("class","but but_down1");
	$.ajax({
		url: '/lottery/year_feedback_download.php',  //supwater  点击详情 点击下载
		data:"softid="+softid+"&sid="+sid+"&aid="+aid+"&pkgname="+my_package, 
		type:"post",
		success:function(data) {
			window.AnzhiActivitys.downloadForActivity(parseInt(aid),softid,my_package,softname,versioncode,size,is_details);
		},
	});
}
function installApp(softid,pkgname){
	$.ajax({
		url: '/lottery/vacation_third_install.php',
		data: 'softid='+softid+'&sid='+sid+'&package='+pkgname+'&aid='+aid,
		type: 'post',
		success: function(data){
			window.AnzhiActivitys.installAppForActivity(softid);
		}
	});
}
function indetailApp(pkg){
	window.AnzhiActivitys.inDetail(pkg,aid,0);
}
function onDownloadStateChanged(softid,newState){
	<!--{foreach from=$out.soft_info item='val' key='k'}-->
		var softids = "<!--{$val['softid']}-->";
		if(softids == softid){
			var softname = "<!--{$val.softname}-->";
			var pkg = "<!--{$k}-->";
			var file_size = parseInt("<!--{$val.filesize}-->");
			var version_code = "<!--{$val.version_code}-->";
			<!--{ break; }-->
		}
	<!--{/foreach}-->
	if(newState == 1 || newState == 2 || newState == 3 || newState == 8){
		//$("."+softid+"_btn").attr('onclick',"go_softinfo_down("+parseInt(softid)+",'"+pkg+"','"+softname+"','"+version_code+"','"+file_size+"',1)");	
		$("#"+softid+"_btn2").attr('onclick',"go_softinfo_down("+parseInt(softid)+",'"+pkg+"','"+softname+"','"+version_code+"','"+file_size+"',0)");	
		var str = "but but_down1";
	}else if(newState == 4){
		var str = "but but_down";
	}else if(newState == 5){		
		$("#"+softid+"_btn2").attr('onclick',"installApp("+parseInt(softid)+",'"+pkg+"')");	
		var str = "but but_install";
	}else if(newState == 6){
		$("#"+softid+"_btn2").attr('onclick',"openApp('"+pkg+"',"+parseInt(softid)+")");		
		var str = "but but_open";
	}else if(newState == 9){
		var str = "but but_down1";		
	}
	/*
	if(pkg =='com.ijinshan.kbatterydoctor'){
		alert(newState);
	}
	*/
	$("#"+softid+"_btn2").attr("class",str);
}
</script>