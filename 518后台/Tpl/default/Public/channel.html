<script>function searchChannel(){	$.ajax({		url: '__APP__/Public/showChannel/callback/{$callback}/type/{$input_type}/ready/{$ready}/selected/{$selected}/platform/{$platform}',		data: {keyword: $('#keyword').val()},		type: 'POST',		success: function(data){			var len = $('.TB_ajaxContent').length			if (len > 0) {				$('#TB_ajaxContent'+window_list[len-1]).html(data)			} else {				$('#TB_ajaxContent').html(data)			}		}	});}function allChannel(){	$.ajax({		url: '__APP__/Public/showChannel/callback/{$callback}/type/{$input_type}/ready/{$ready}/selected/{$selected}/platform/{$platform}',		data: {all: 1},		type: 'POST',		success: function(data){			var len = $('.TB_ajaxContent').length			if (len > 0) {				$('#TB_ajaxContent'+window_list[len-1]).html(data)			} else {				$('#TB_ajaxContent').html(data)			}		}	});}function selectAll(){	$("tr:visible input[name^=cid]").each(function(){		if(this.checked !=true){			var item = $('<label class="l_cid_' + this.value + '">' + $('.l_cid_' + this.value).html() + '</label>');			item.find('input').attr('checked', true);			$('#channel_selected').append(item);		}		this.checked = true;	})	onclikChannel();}function selectUnAll(){    $("tr:visible input[name^=cid]").each(function(){		this.checked = !$(this).attr("checked");		if(this.checked!=true){			$('#channel_selected .l_cid_' + this.value).remove();		}		else{			$('.l_cid_' + this.value + ' input:checked').attr('checked', true);			var item = $('<label class="l_cid_' + this.value + '">' + $('.l_cid_' + this.value).html() + '</label>');			$('#channel_selected').append(item);		}	})	onclikChannel();}function _toggleCategory(id){	var flag = $('#as' +id).attr('ref');	if (flag == 1) {		 $('#as' +id).attr('ref',0);		 $('#as' +id).html('+');		 $('.cs' +id).hide();	} else {		 $('#as' +id).attr('ref',1);		 $('#as' +id).html('-');		 $('.cs' +id).show();	}}function selectChannel(obj,fselected,type){	if (obj.checked == true) {		var item = $('<label class="l_cid_' + $(obj).val() + '">' + $('.l_cid_' + $(obj).val()).html() + '</label>');		item.find('input').attr('checked', true);		$('#channel_selected').append(item);		//alert(fselected);		if(type=="radio"){			tb_remove();		}		fselected();	} else {		$('.l_cid_' + $(obj).val() + ' input:checked').attr('checked', false);		$('#channel_selected .l_cid_' + obj.value).remove();		onclikChannel_c(obj.value);	}}noEnter();function noEnter(){   document.onkeydown = function(e){	if (e.keyCode == 13) {	return false;	} }}function Selected_check(id){	 $('#as' +id).attr('ref',1);	 $('#as' +id).html('-');	 $('.cs' +id).show();	$("tr:visible input[name^=cid]").each(function(){		if($(this).is(':checked')) {			var item = $('<label class="l_cid_' + this.value + '">' + $('.l_cid_' + this.value).html() + '</label>');			$('#channel_selected').append(item);		}else{			$('#channel_selected .l_cid_' + this.value).remove();			onclikChannel_c($(this).value);		}	});	onclikChannel();}</script><form id="channelForm"><table width="100%" border="1"><tr><td><input type="text" id="keyword" name="keyword" value="{$keyword}"/></td><td><input type="button" value="搜索渠道" onclick="searchChannel()"/><input type="button" value="所有渠道列表" onclick="allChannel()"/></td></tr><tr><td colspan="2"><input type="button" value="提交选中渠道" onclick="{$callback}()"/><?php if($input_type!="radio"){ ?><input type="button" value="全选" onclick="selectAll()"/><input type="button" value="反选" onclick="selectUnAll()"/><?php	}?></td></tr></table>选中渠道<div id='channel_selected'></div><table width="100%" border="1"><volist name='category_list' id='category' key="category_key">	<tr>	<td colspan="3"><a href="javascript:_toggleCategory({$category_key})" ><span id="as{$category_key}" ref='1'>-</span>&nbsp;&nbsp;&nbsp;{$category.name}</a>		<if condition="$input_type neq 'radio'">		<input type="checkbox" onclick="$('input[rel={$category_key}]').attr('checked', $(this).attr('checked') == 'checked');Selected_check({$category_key});" >全选		</if>	</td></tr>	<tr class="cs{$category_key}">	<volist name='category.result' id='channel' key="k">		<td <if condition="$channel.checked eq true"> style="background-color:blue"</if>>		<label class="l_cid_{$channel.cid}">					<input rel="{$category_key}" type="<?php echo $input_type?>" name="cid<?php echo $input_type=='checkbox' ? '[]' : '';?>" value="<?php echo $channel['cid'] ?>" onclick='selectChannel(this,<?php echo $selected;?>,"<?php echo $input_type;?>")' alt='<?php echo $channel['chname'] ?>' <?php if(isset($selected_channel[$channel['cid']])):?>checked='true'<?php endif?>/><?php echo $channel['chname'] ?>		</label></td>		<if condition="$k % 3 eq 0"></tr><tr class="cs{$category_key}"></if>	</volist></volist></table><input type="button" value="提交选中渠道" onclick="{$callback}()"/></form><?php if (!empty($ready)) :?><script><?php echo $ready;?>();</script><?php endif;?>