<link type="text/css" href="/Public/css/co_common.css" rel="stylesheet" />
<link type="text/css" href="/Public/css/checkout.css" rel="stylesheet" />
<link type="text/css" href="/Public/css/account.css" rel="stylesheet" />
<script type="text/javascript" src="/Public/js/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="/Public/js/co_public.js"></script>
<script>
	function my_settle(){
		if($('#change_settle').val() == 1){
			$('#settlement_patterns_1').css('display','');
			$('#settlement_patterns_2').css('display','none');
			$('#settlement_patterns_two').attr('disabled','disabled');
		}else if($('#change_settle').val() == 2){
			$('#settlement_patterns_1').css('display','none');
			$('#settlement_patterns_2').css('display','');
			$('#settlement_patterns_one').attr('disabled','disabled');
		}
	}
	function selectType(v){
		var uid = $('#uid').val();
		var pre_1 = $('#pre_1').val();
		var pre_2 = $('#pre_2').val();
		var pre_3 = $('#pre_3').val();
		var income_11 = $('#income_1').val();
		var income_22 = $('#income_2').val();
		var income_33 = $('#income_3').val();
		var settlement_patterns = v;
	
		
		if(settlement_patterns == 1){
			$('#pre_1').attr('checked',true);
			$('#pre_1').attr('disabled',true);
			$('#pre_2').attr('checked',false);
			$('#pre_2').attr('disabled',false);
			$('#pre_3').attr('checked',false);
			$('#pre_3').attr('disabled',false);
		}else if(settlement_patterns == 2){
			$('#pre_2').attr('checked',true);
			$('#pre_2').attr('disabled',true);
			$('#pre_1').attr('checked',false);
			$('#pre_1').attr('disabled',false);
			$('#pre_3').attr('checked',false);
			$('#pre_3').attr('disabled',false);
		}else if(settlement_patterns == 3){
			$('#pre_3').attr('checked',true);
			$('#pre_3').attr('disabled',true);
			$('#pre_1').attr('checked',false);
			$('#pre_1').attr('disabled',false);
			$('#pre_2').attr('checked',false);
			$('#pre_2').attr('disabled',false);
		}else if(settlement_patterns == 4 || settlement_patterns == 8){
			$('#pre_1').attr('checked',true);
			$('#pre_1').attr('disabled',true);
			$('#pre_2').attr('checked',true);
			$('#pre_2').attr('disabled',true);
			$('#pre_3').attr('checked',false);
			$('#pre_3').attr('disabled',false);
		}else if(settlement_patterns == 5 || settlement_patterns == 9){
			$('#pre_1').attr('checked',true);
			$('#pre_1').attr('disabled',true);
			$('#pre_3').attr('checked',true);
			$('#pre_3').attr('disabled',true);
			$('#pre_2').attr('checked',false);
			$('#pre_2').attr('disabled',false);
		}else if(settlement_patterns == 6 || settlement_patterns == 10){
			$('#pre_2').attr('checked',true);
			$('#pre_2').attr('disabled',true);
			$('#pre_3').attr('checked',true);
			$('#pre_3').attr('disabled',true);
			$('#pre_1').attr('checked',false);
			$('#pre_1').attr('disabled',false);
		}else if(settlement_patterns == 7 || settlement_patterns == 11 || settlement_patterns == 12 || settlement_patterns == 13){
			$('#pre_1').attr('checked',true);
			$('#pre_1').attr('disabled',true);
			$('#pre_2').attr('checked',true);
			$('#pre_2').attr('disabled',true);
			$('#pre_3').attr('checked',true);
			$('#pre_3').attr('disabled',true);
		}
		
		if(settlement_patterns == 1){
			$('#income_1').attr('checked',true);
			$('#income_1').attr('disabled',true);
			$('#income_2').attr('checked',false);
			$('#income_2').attr('disabled',false);
			$('#income_3').attr('checked',false);
			$('#income_3').attr('disabled',false);
		}else if(settlement_patterns == 2){
			$('#income_2').attr('checked',true);
			$('#income_2').attr('disabled',true);
			$('#income_1').attr('checked',false);
			$('#income_1').attr('disabled',false);
			$('#income_3').attr('checked',false);
			$('#income_3').attr('disabled',false);
		}else if(settlement_patterns == 3){
			$('#income_3').attr('checked',true);
			$('#income_3').attr('disabled',true);
			$('#income_1').attr('checked',false);
			$('#income_1').attr('disabled',false);
			$('#income_2').attr('checked',false);
			$('#income_2').attr('disabled',false);
		}else if(settlement_patterns == 4 || settlement_patterns == 8){
			$('#income_1').attr('checked',true);
			$('#income_1').attr('disabled',true);
			$('#income_2').attr('checked',true);
			$('#income_2').attr('disabled',true);
			$('#income_3').attr('checked',false);
			$('#income_3').attr('disabled',false);
		}else if(settlement_patterns == 5 || settlement_patterns == 9){
			$('#income_1').attr('checked',true);
			$('#income_1').attr('disabled',true);
			$('#income_3').attr('checked',true);
			$('#income_3').attr('disabled',true);
			$('#income_2').attr('checked',false);
			$('#income_2').attr('disabled',false);
		}else if(settlement_patterns == 6 || settlement_patterns == 10){
			$('#income_2').attr('checked',true);
			$('#income_2').attr('disabled',true);
			$('#income_3').attr('checked',true);
			$('#income_3').attr('disabled',true);
			$('#income_1').attr('checked',false);
			$('#income_1').attr('disabled',false);
		}else if(settlement_patterns == 7 || settlement_patterns == 11 || settlement_patterns == 12 || settlement_patterns == 13){
			$('#income_1').attr('checked',true);
			$('#income_1').attr('disabled',true);
			$('#income_2').attr('checked',true);
			$('#income_2').attr('disabled',true);
			$('#income_3').attr('checked',true);
			$('#income_3').attr('disabled',true);
		}
		
		var reception_reveal_have = $('#reception_reveal_have').val();
		var income_reveal_have = $('#income_reveal_have').val();
		
		if(reception_reveal_have == 1){
			$('#pre_1').attr('checked',true);
			$('#pre_1').attr('disabled',true);
		}else if(reception_reveal_have == 2){
			$('#pre_2').attr('checked',true);
			$('#pre_2').attr('disabled',true);
		}else if(reception_reveal_have == 3){
			$('#pre_1').attr('checked',true);
			$('#pre_1').attr('disabled',true);
			$('#pre_2').attr('checked',true);
			$('#pre_2').attr('disabled',true);
		}else if(reception_reveal_have == 4){
			$('#pre_3').attr('checked',true);
			$('#pre_3').attr('disabled',true);
		}else if(reception_reveal_have == 5){
			$('#pre_1').attr('checked',true);
			$('#pre_1').attr('disabled',true);
			$('#pre_3').attr('checked',true);
			$('#pre_3').attr('disabled',true);
		}else if(reception_reveal_have == 6){
			$('#pre_2').attr('checked',true);
			$('#pre_2').attr('disabled',true);
			$('#pre_3').attr('checked',true);
			$('#pre_3').attr('disabled',true);
		}else if(reception_reveal_have == 7){
			$('#pre_1').attr('checked',true);
			$('#pre_1').attr('disabled',true);
			$('#pre_2').attr('checked',true);
			$('#pre_2').attr('disabled',true);
			$('#pre_3').attr('checked',true);
			$('#pre_3').attr('disabled',true);
		}
		
		if(reception_reveal_have == 1){
			$('#income_1').attr('checked',true);
			$('#income_1').attr('disabled',true);
		}else if(reception_reveal_have == 2){
			$('#income_2').attr('checked',true);
			$('#income_2').attr('disabled',true);
		}else if(reception_reveal_have == 3){
			$('#income_1').attr('checked',true);
			$('#income_1').attr('disabled',true);
			$('#income_2').attr('checked',true);
			$('#income_2').attr('disabled',true);
		}else if(reception_reveal_have == 4){
			$('#income_3').attr('checked',true);
			$('#income_3').attr('disabled',true);
		}else if(reception_reveal_have == 5){
			$('#income_1').attr('checked',true);
			$('#income_1').attr('disabled',true);
			$('#income_3').attr('checked',true);
			$('#income_3').attr('disabled',true);
		}else if(reception_reveal_have == 6){
			$('#income_2').attr('checked',true);
			$('#income_2').attr('disabled',true);
			$('#income_3').attr('checked',true);
			$('#income_3').attr('disabled',true);
		}else if(reception_reveal_have == 7){
			$('#income_1').attr('checked',true);
			$('#income_1').attr('disabled',true);
			$('#income_2').attr('checked',true);
			$('#income_2').attr('disabled',true);
			$('#income_3').attr('checked',true);
			$('#income_3').attr('disabled',true);
		}
		
	}
	
	function can_not(){
		return false;
	}
	
function showOrHide(obj){
	$(obj).parent().parent().find('.config_list_tips').toggle();
}

function give_value(){
	if($('#pre_1').attr('checked') == true && $('#pre_2').attr('checked') == true && $('#pre_3').attr('checked') == true){
		$('#reception_reveal').val(7);
	}else if($('#pre_1').attr('checked') == true && $('#pre_2').attr('checked') == true && $('#pre_3').attr('checked') != true){
		$('#reception_reveal').val(3);
	}else if($('#pre_1').attr('checked') == true && $('#pre_2').attr('checked') != true && $('#pre_3').attr('checked') == true){
		$('#reception_reveal').val(5);
	}else if($('#pre_1').attr('checked') != true && $('#pre_2').attr('checked') == true && $('#pre_3').attr('checked') == true){
		$('#reception_reveal').val(6);
	}else if($('#pre_1').attr('checked') != true && $('#pre_2').attr('checked') != true && $('#pre_3').attr('checked') == true){
		$('#reception_reveal').val(4);
	}else if($('#pre_1').attr('checked') == true && $('#pre_2').attr('checked') != true && $('#pre_3').attr('checked') != true){
		$('#reception_reveal').val(1);
	}else if($('#pre_1').attr('checked') != true && $('#pre_2').attr('checked') == true && $('#pre_3').attr('checked') != true){
		$('#reception_reveal').val(2);
	}

	if($('#income_1').attr('checked') == true && $('#income_2').attr('checked') == true && $('#income_3').attr('checked') == true){
		$('#income_reveal').val(7);
	}else if($('#income_1').attr('checked') == true && $('#income_2').attr('checked') == true && $('#income_3').attr('checked') != true){
		$('#income_reveal').val(3);
	}else if($('#income_1').attr('checked') == true && $('#income_2').attr('checked') != true && $('#income_3').attr('checked') == true){
		$('#income_reveal').val(5);
	}else if($('#income_1').attr('checked') != true && $('#income_2').attr('checked') == true && $('#income_3').attr('checked') == true){
		$('#income_reveal').val(6);
	}else if($('#income_1').attr('checked') != true && $('#income_2').attr('checked') != true && $('#income_3').attr('checked') == true){
		$('#income_reveal').val(4);
	}else if($('#income_1').attr('checked') == true && $('#income_2').attr('checked') != true && $('#income_3').attr('checked') != true){
		$('#income_reveal').val(1);
	}else if($('#income_1').attr('checked') != true && $('#income_2').attr('checked') == true && $('#income_3').attr('checked') != true){
		$('#income_reveal').val(2);
	}

}
</script>
<div class="newbox" id="accout_edit_newbox">
	<h6><em style="float:left; font-style:normal">结算配置：</em><span class="title_tips" onmouseover="showOrHide1(this)" onmouseout="showOrHide2(this)"></span></h6><br />
	<div class="config_list_tips">
		<p><strong>前台展示类型：</strong>可控制客户看到的收入类型，需大于等于结算模式及收入值展示类型的范围。勾选后不可去除，请慎重操作！<br/><strong>收入值展示类型：</strong>可控制客户看到的收入类型是否有数据，需大于等于结算模式，小于等于前台展示类型。
</p>
		
		<span class="title_tips_arrow"></span>
	</div>
	<div class="clear"></div>
	<div><h3><span>账号名称:{$account.user_name}</span></h3></div>
	<div class="newbox_cnt">
		<form enctype="multipart/form-data" class="accout_edit_form" action="/index.php/Cooperative/CoAccount/editSettlement/" method="post" name='' onsubmit="return checkSubmit();">
				<div class="accout_edit_list">
				<input type="hidden" name="type" value="{$type}" />
				<input type="hidden" name="names" value="{$names}" />
				<label>结算模式：</label>
				<select onchange="my_settle();" id="change_settle" name="change_settle">
					<option value="1" id="settle_1" <if condition="$account['settlement'] elt 7">selected</if>>合计值</option>
					<option value="2" id="settle_2" <if condition="$account['settlement'] egt 8">selected</if>>最大值</option>
				</select>
				<div  id="settlement_patterns_1" <if condition="$account['settlement'] elt 7">style="float:left"<else />style="float:left;display:none;"</if>>
					<select name="settlement_patterns" id="settlement_patterns_one" onchange='selectType(this.value);'>
						<option value="0">请选择...</option>
						<option value="1" <?php if($account['settlement'] == 1){ ?>selected<?php } ?>>A</option>
						<option value="2" <?php if($account['settlement'] == 2){ ?>selected<?php } ?>>B</option>
						<option value="3" <?php if($account['settlement'] == 3){ ?>selected<?php } ?>>C</option>
						<option value="4" <?php if($account['settlement'] == 4){ ?>selected<?php } ?>>A+B</option>
						<option value="5" <?php if($account['settlement'] == 5){ ?>selected<?php } ?>>A+C</option>
						<option value="6" <?php if($account['settlement'] == 6){ ?>selected<?php } ?>>B+C</option>
						<option value="7" <?php if($account['settlement'] == 7){ ?>selected<?php } ?>>A+B+C</option>
					</select>
				</div>
				
				<div id="settlement_patterns_2" <if condition="$account['settlement'] egt 8">style="float:left;"<else />style="float:left;display:none;"</if>>
					<select name="settlement_patterns_1" id="settlement_patterns_two" onchange='selectType(this.value);'>
						<option value="0">请选择...</option>
						<option value="8"  <?php if($account['settlement'] == 8){ ?>selected<?php } ?>>A与B</option>
						<option value="9"  <?php if($account['settlement'] == 9){ ?>selected<?php } ?>>A与C</option>
						<option value="10" <?php if($account['settlement'] == 10){ ?>selected<?php } ?>>B与C</option>
						<option value="11" <?php if($account['settlement'] == 11){ ?>selected<?php } ?>>A与B+C</option>
						<option value="12" <?php if($account['settlement'] == 12){ ?>selected<?php } ?>>B与A+C</option>
						<option value="13" <?php if($account['settlement'] == 13){ ?>selected<?php } ?>>C与A+B</option>
					</select>
				</div>
				<span class="accout_edit_tips">*</span>
			</div>
			<div class="clear"></div>
			<div class="accout_edit_list">
				<label>前端展示类型：</label>
					<input id="pre_1" type='checkbox' class='A' name="reception_reveal_li[]" value='1' <?php if($account['reception_reveal'] == 1 || $account['reception_reveal'] == 3 || $account['reception_reveal'] == 5 || $account['reception_reveal'] == 7){ ?>checked disabled<?php } ?> />A:安智市场激活收入
					<input id="pre_2" type='checkbox' class='B' name="reception_reveal_li[]" value='2' <?php if($account['reception_reveal'] == 2 || $account['reception_reveal'] == 3 || $account['reception_reveal'] == 6 || $account['reception_reveal'] == 7){ ?>checked disabled<?php } ?> />B:广告分成收入
					<input id="pre_3" type='checkbox' class='C' name="reception_reveal_li[]" value='4' <?php if($account['reception_reveal'] == 4 || $account['reception_reveal'] == 5 || $account['reception_reveal'] == 6 || $account['reception_reveal'] == 7){ ?>checked disabled<?php } ?> />C:游戏分成收入
					<input type="hidden" id="reception_reveal_have" value="{$account.reception_reveal}" />
					<input type="hidden" id="reception_reveal" name="reception_reveal"/>
					
					<div class="clear"></div>
			</div>
			<span style="color:red;">*</span>
			<div class="clear"></div>
			<div class="accout_edit_list">
				<label>收入值展示类型：</label>
					<input type='checkbox' class='A' id="income_1" name="income_reveal_li[]" value='1' <?php if($account['income_reveal'] == 1 || $account['income_reveal'] == 3 || $account['income_reveal'] == 5 || $account['income_reveal'] == 7){ ?>checked disabled<?php } ?> />A:安智市场激活收入
					<input type='checkbox' class='B' id="income_2" name="income_reveal_li[]" value='2' <?php if($account['income_reveal'] == 2 || $account['income_reveal'] == 3 || $account['income_reveal'] == 6 || $account['income_reveal'] == 7){ ?>checked disabled<?php } ?> />B:广告分成收入
					<input type='checkbox' class='C' id="income_3" name="income_reveal_li[]" value='4' <?php if($account['income_reveal'] == 4 || $account['income_reveal'] == 5 || $account['income_reveal'] == 6 || $account['income_reveal'] == 7){ ?>checked disabled<?php } ?> />C:游戏分成收入
					<input type="hidden" id="income_reveal_have" value="{$account.income_reveal}" />
					<input type="hidden" id="income_reveal" name="income_reveal"/>
					<div class="clear"></div>
			</div>
			<span style="color:red;">*</span>
			<div class="clear"></div>
			<div class="accout_edit_list" style="width:440px">
				<label>账号属性：</label>
				<select name="account_property">
					<option value="1" <if condition="$account['account_property'] eq 1">selected='selected'</if>>企业</option>
					<option value="2" <if condition="$account['account_property'] eq 2">selected='selected'</if>>个人</option>
				</select>
				<span class="accout_edit_tips">*</span>
				<div class="clear"></div>
			</div>
			<div class="accout_edit_list" style="width:440px">
				<label>最低付款值：</label>
				<input type="text" class="inputtext" name="min_pay" value="{$account.min_balance}" />
				<span>元</span>
				<div class="clear"></div>
			</div>
			<div class="clear"></div>
			<div class="accout_edit_list" style="width:440px">
				<label>户名：</label>
				<input type="text" class="inputtext" name="account_name" value="{$account.account_name}" />
				<span class="accout_edit_tips">*</span>
				<div class="clear"></div>
			</div>
			<div class="accout_edit_list" style="width:440px">
				<label>所属银行：</label>
				<input type="text" class="inputtext" name="bank_name" value="{$account.bank_name}" />
				<span class="accout_edit_tips">*</span>
				<div class="clear"></div>
			</div>
			<div class="accout_edit_list" style="width:440px">
				<label>开户行：</label>
				<input type="text" class="inputtext" name="bank_addr" value="{$account.bank_addr}"/>
				<span class="accout_edit_tips">*</span>
				<div class="clear"></div>
			</div>
			<div class="accout_edit_list" style="width:440px">
				<label>开户行所在地：</label>
				<input type="text" class="inputtext" name="bank_location" value="{$account.bank_location}" />
				<span class="accout_edit_tips">*</span>
				<div class="clear"></div>
			</div>
			<div class="accout_edit_list" style="width:440px">
				<label>银行账号：</label>
				<input type="text" class="inputtext"  name="bank_account" value="{$account.bank_account}" />
				<span class="accout_edit_tips">*</span>
				<div class="clear"></div>
			</div>
			<div style="width:440px; position:relative" class="accout_edit_list">
				<label>银行卡扫描件：</label>
					<input type="text" class="inputtext" id="bankFile" value="{$account.bank_file}" />
					<div class="upload_btn">上传</div>
					<input type="file" class="inputfile" name="bankFile" onchange="$('#bankFile').val($(this).val());" />
			</div>
			<div class="accout_edit_list" style="width:440px">
				<label>账号负责人：</label>
				<select name="charge">
				<?php foreach($charge as $key => $val){ ?>
					<option value="{$val.id}" <?php if($account['charge_person'] == $val['id']){ ?>selected<?php } ?>>{$val.charge_name}</option>
				<?php } ?>
				</select>
				<span class="accout_edit_tips">*</span>
				<div class="clear"></div>
			</div>	
			<div class="accout_edit_list" style="width:440px">
				<label>账号类型：</label>
				<select>
				<option>请选择账号类型</option>
				</select>
				<div class="clear"></div>
			</div>	
			<div class="newbox_tips2">
			<p class="red">注：<br/>1、带“*”内容为必填项</p>
		</div>			
		<div class="open_close_btn" style="padding-left:100px">
			<input name='uid' id="uid" type='hidden' value='{$account.uid}' />
			<input type='submit' value='确认' onclick="give_value();"/>
			<a href="javascript:;" onclick="tb_remove();">取消</a>
			<div class="clear"></div>
		</div>
		
	</form>
	</div>
</div>
<script>
function checkSubmit(){
	var account_property = $('select[name=account_property]').val();
	var bank_name = $('input[name=bank_name]').val();
	var bank_addr = $('input[name=bank_addr]').val();
	var bank_location = $('input[name=bank_location]').val();
	var account_name = $('input[name=account_name]').val();
	var bank_account = $('input[name=bank_account]').val();
	if(bank_name.length==0){
		$('input[name=bank_name]').css("border-color","#f00");
		return false;
	}
	if(bank_addr.length==0){
		$('input[name=bank_addr]').css("border-color","#f00");
		return false;
	}
	if(bank_location.length==0){
		$('input[name=bank_location]').css("border-color","#f00");
		return false;
	}
	if(account_name.length==0){
		$('input[name=account_name]').css("border-color","#f00");
		return false;
	}
	if(bank_account.length==0){
		$('input[name=bank_account]').css("border-color","#f00");
		return false;
	}
}
</script>