
<table   width="100%" border="0" cellpadding="0" cellspacing="0" >
	<tr><td colspan =4 ><input type="checkbox" id="sid_all[]" name="sid_all[]" onclick="s_selectAll(this);">全选</td></tr>
	<tr>
	<?php $i =0; foreach ($settlement_status as $k => $v): ?>
	<td><input  type="checkbox" name="s_id[]" value="{$k}" <?php if(in_array($k,$status_id_arr)) echo "checked='true'"; ?> />&nbsp;&nbsp;&nbsp;{$v}</td>
		<?php  $i++; if ($i % 4 == 0 ){ ?>
	</tr><tr>
		<?php } ?>
	<?php endforeach; ?>
	</tr>
	<tr><td>&nbsp;</td></tr>
	<tr><td colspan =4>
		<button  onclick="refreshsid();">确定</button>
		&nbsp;&nbsp;&nbsp;
		<a href='javascript:;' onclick='clean_sid();' >清除复选条件</a></td>
	</tr>
</table>



<script type="text/javascript">
function clean_sid(){
	$("[name='sid_all[]']").each(function(){
		$(this).attr('checked',false);
	});
	$("[name='s_id[]']").each(function(){
		$(this).attr('checked',false);
	});
}

function refreshsid()
{
	var ids = '';
	$("input[name='s_id[]']").each(function(){
		if (this.checked) {
			ids+= $(this).val() + ',';
		}
	});
	$('#status_id').val(ids);
	self.tb_remove();
}
//全选渠道类型
function s_selectAll(e) {	
	var chkobj =  document.getElementsByName("s_id[]");
	var len = chkobj.length;
	var ids = '';
	if($(e).attr('checked') == 'checked'){
	   for(var i = 0; i < len; i++){
			chkobj[i].checked = true;
			ids+= chkobj[i].value+',';
	   }
	}
	if($(e).attr('checked') != 'checked'){
	   for(var a = 0; a <len; a++){
		 chkobj[a].checked = false;
	   }
	}
}
</script>